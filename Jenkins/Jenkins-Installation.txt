


To install java first on amazon linux machine

-----------------------

yum install java-1.8.0-openjdk-devel.x86_64

curl --silent --location http://pkg.jenkins-ci.org/redhat-stable/jenkins.repo | sudo tee /etc/yum.repos.d/jenkins.repo
sudo rpm --import https://jenkins-ci.org/redhat/jenkins-ci.org.key
yum install epel-release -y
amazon-linux-extras install epel -y
yum update -y
yum install jenkins -y
systemctl start jenkins
-----------------------------------------

To setup master slave Setup
on Slave node
Step 1: Install java 8 as root user
		yum install java-1.8.0-openjdk-devel.x86_64
		
Step 2: On Slve node , run the below command as normal user (ec2-user)
	> ssh-keygen -t rsa -N "" -f /home/ec2-user/.ssh/id_rsa_jenkins
	This above command will create id_rsa_jenkins and id_rsa_jenkins.pub as pvt key and public key respectively in /home/ec2-user/ dir
Step 3: Now copy the content of id_rsa_jenkins.pub to authorized_keys under dir -> /home/ec2-user/.ssh/authorized_keys
Step 4: chmod 700 /home/ec2-user/.ssh/authorized_keys
Step 5: create an dir in slave -> /var/lib/jenkins/.ssh/known_hosts
Step 6: chmod 700 var/lib/jenkins/.ssh/known_hosts
Step 7: Now Copy the id_rsa_jenkins.pub content to /var/lib/jenkins/.ssh/known_hosts



On master node
step 1: mkdir -p /var/lib/jenkins/.ssh/known_hosts
step 2: Ececute the following query
		ssh-keyscan -H <slave-machine-IP> >> /var/lib/jenkins/.ssh/known_hosts
		Note: The same IP should be used while configuring the Agent in jenkins console
step 3: chown jenkins:jenkins .ssh
step 4: chown jenkins:jenkins known_hosts
step 5: chmod 700 known_hosts


___
Now Jenkins update the SSH credentials with username ec2-user
Create a node with the pvt or pub ip that you used above in master node on step 2
This will create an jenkins slave node











