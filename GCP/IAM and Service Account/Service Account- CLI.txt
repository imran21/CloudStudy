GCP Service Account

To list Service account
>gcloud iam service-accounts list

To list all service accounts include google managed one
>gcloud projects get-iam-policy PROJECT


To list what are all the permission that particula resource has
Like, To check if VM instances is aving access to storage bucket
>gcloud auth list

To create a key a keyfile for the servie account
>gcloud iam service-accounts keys create <any_file_name_key>.json --iam-account=<Service account email>

To list the keys associated with the service account
>gcloud iam service-accounts keys list --iam-account=<Service Account email>

If you try to create an SQL instances throug CLI you are not permitted. But whith the corect service account it is possible
Before that you must activate that service account in the CLI terminal
To activate,
>gcloud auth activate-service-account <service-account email> --key-file=<key_file>.json

Now if you try to create another SQL instance it will work

To upload a new own public key to your service account
gcloud iam service-accounts keys upload PUB_KEY --iam-account=SERVICE_ACCOUNT
---------------------------------------------------
Impersonate service Account.
The impersonate service account is used to access the GCP service without any keyfile
To Use the impersonate-service account. First, Te user sould be added to the service account and Second, The user sould have "service tocken creater Permission" should be attached to the user.
This is like STS in AWS

once added you can check this like gsutil command if the service account has google storage util permission.
>gsutil -i <service account email> ls

>gcloud projects list --impersonate-service-account=<service account-email> 

Insted of entering the impersonate service acount each time to every command,we can add permanently to config file.
To Add the impersonate service account to config file follow the below command
>gcloud config set auth/impersonate_service_account <service-Account-email>
